/* ===============================
   PennyWay – CLEAN STYLE
   =============================== */
:root {
  --bg: #d5e6f9;
  --card: #fff;
  --text: #1e293b;
  --muted: #6b7280;
  --accent: #3b82f6;
  --accent-light: #9ac4f5;
  --line: #dbeafe;
  --ok: #34d399;
  --bad: #b91c1c;
}

/* ===== Base ===== */
* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial; }
body {
  color: var(--text);
  /* Оригінальний фон body, замінений на багатошаровий градієнт */
  /* background: radial-gradient(circle at 50% 10%, #dbeef9 0%, #bddcf0 40%, #9fc9e1 70%, #86b2cd 100%); */

  /* Новий фон з плавними лініями, створений за допомогою CSS-градієнтів */
  background-image:
    /* Шари лінійних градієнтів для хвиль */
    linear-gradient(135deg, rgba(255,255,255,0.08) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.08) 50%, rgba(255,255,255,0.08) 75%, transparent 75%, transparent),
    linear-gradient(45deg, rgba(255,255,255,0.08) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.08) 50%, rgba(255,255,255,0.08) 75%, transparent 75%, transparent),
    linear-gradient(135deg, rgba(255,255,255,0.04) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.04) 50%, rgba(255,255,255,0.04) 75%, transparent 75%, transparent),
    linear-gradient(45deg, rgba(255,255,255,0.04) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.04) 50%, rgba(255,255,255,0.04) 75%, transparent 75%, transparent),
    /* Ваш основний радіальний градієнт як останній шар */
    radial-gradient(circle at 50% 10%, #dbeef9 0%, #bddcf0 40%, #9fc9e1 70%, #86b2cd 100%);

  /* Розміри та повторення для градієнтів хвиль */
  background-size:
    300px 300px, /* Розмір візерунка для першого шару */
    300px 300px, /* Розмір візерунка для другого шару */
    400px 400px, /* Розмір візерунка для третього шару (зміщення) */
    400px 400px, /* Розмір візерунка для четвертого шару (зміщення) */
    cover;       /* Розмір для основного радіального градієнта */

  background-position:
    0 0,    /* Позиція першого шару */
    0 0,    /* Позиція другого шару */
    50px 50px, /* Зміщення третього шару для ефекту глибини */
    50px 50px, /* Зміщення четвертого шару для ефекту глибини */
    center center; /* Позиція основного градієнта */

  background-repeat: repeat; /* Всі шари повторюються */
}
.visually-hidden { position: absolute; left: -9999px; }
.muted { color: var(--muted); }
.right { text-align: right; }
.row { display: flex; align-items: center; }
.grid { display: grid; gap: 20px; }
.wrap { max-width: 1180px; margin: 0 auto; padding: 20px; }
:focus-visible { outline: 3px solid var(--accent-light); outline-offset: 2px; }

/* ===== Cards ===== */
.card {
  background: var(--card);
  border: 1px solid #e6eefc;
  border-radius: 22px;
  padding: 16px;
  box-shadow: 0 2px 12px rgba(30, 64, 175, .06);
  text-align: left;
}
.card.soft { padding: 12px; }
.card-xl { padding-bottom: 0; }
.empty { color: var(--muted); font-style: italic; padding: 8px 0; text-align: center; }
.hidden, .is-hidden, .collapsed, .bt-hidden { display: none !important; }

/* ===== Inputs / Buttons ===== */
label { font-size: 12px; color: var(--muted); margin-bottom: 6px; display: block; }
input, select, textarea {
  width: 100%; padding: 12px;
  background: #f2f8ff; color: var(--text);
  border: 1px solid var(--accent-light); border-radius: 10px; font-size: 14px;
  transition: border .2s ease, box-shadow .2s ease, background .2s ease;
}
input:focus, select:focus, textarea:focus {
  outline: none; border-color: #7db0f0;
  box-shadow: 0 0 0 3px rgba(154,196,245,.3); background: #fff;
}
button {
  cursor: pointer; border: 0; background: var(--accent); color: #fff; font-weight: 700;
  padding: 12px 20px; border-radius: 10px;
  transition: filter .2s, transform .1s, box-shadow .2s;
  box-shadow: 0 1px 0 rgba(255,255,255,.6) inset, 0 2px 8px rgba(30,64,175,.10);
}
button:hover { filter: brightness(1.02); }
button:active { transform: scale(.97); }
button:disabled { background: #d1d5db; color: #9ca3af; cursor: not-allowed; box-shadow: none; }
button.ghost { background: transparent; color: var(--muted); border: 1px solid var(--line); box-shadow: none; }
button.small { padding: 8px 12px; }

/* ===== Header + Logo ===== */
.header-bar { display: flex; align-items: center; justify-content: flex-start; margin: 8px 0 12px; }
.brand-logo { display: flex; align-items: center; }
.logo-white {
  height: clamp(80px, 16vw, 220px);
  aspect-ratio: 941 / 265;
  background: #fff;
  -webkit-mask: url('pennyway-logo.png') center / contain no-repeat;
          mask: url('pennyway-logo.png') center / contain no-repeat;
}

/* ===== Top Nav ===== */
.bt-top-nav {
  display: grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap: 10px;
  margin: 10px 0 14px; padding: 10px;
  border: 1px solid #e6eefc; border-radius: 16px;
  background: var(--card); box-shadow: 0 1px 6px rgba(30,64,175,.05);
}
.bt-nav-btn {
  display: inline-flex; align-items: center; justify-content: center;
  height: 52px; padding: 0 18px; font-size: 17px; font-weight: 800;
  border-radius: 14px; border: 1px solid #dfe8fb;
  background: linear-gradient(#f8fbff,#fff); color: var(--text);
}
.bt-nav-btn[aria-current="page"] { background: #eaf2ff; border-color: var(--accent-light); }
@media(max-width:560px){ .bt-top-nav{ grid-template-columns:repeat(2,1fr); } }
@media(max-width:360px){ .bt-top-nav{ grid-template-columns:1fr; } }

/* ===== Home Tabs ===== */
.filter-row { display: flex; align-items: center; gap: 12px; padding: 8px 0 12px; border-bottom: 1px solid var(--line); margin-bottom: 12px; }
.entry-card { padding-top: 12px; }
.bt-tabs { display: flex; gap: 8px; flex-wrap: wrap; border-bottom: 1px solid var(--line); padding-bottom: 8px; margin-bottom: 12px; }
.bt-tab { background: #ecf3ff; color: var(--text); border: 1px solid #dfe8fb; border-radius: 999px; padding: 8px 14px; font-weight: 800; }
.bt-tab.bt-active { background: var(--accent); border-color: var(--accent); color: #fff; }
.bt-panel.bt-hidden { display: none !important; }

/* ===== Dashboard / Charts ===== */
.bt-shell { display: grid; grid-template-columns: minmax(520px,1.7fr) minmax(420px,1fr); gap: 20px; align-items: start; }
.bt-col { min-width: 0; }
@media(max-width:980px){ .bt-shell { grid-template-columns: 1fr; gap: 16px; } }
.chart-card { min-height: 460px; }
#categoryChart { height: 420px !important; width: 100% !important; }

/* ===== Totals ===== */
.totals .line { display: flex; align-items: center; gap: 10px; padding: 6px 0; }
.totals .line .bar { flex: 1; height: 8px; border-radius: 8px; background: #e6eefc; }
.totals .line .bar > div { height: 100%; border-radius: 8px; background: var(--accent); }
.totals .amt { min-width: 90px; text-align: right; font-variant-numeric: tabular-nums; }

/* ===== Limits ===== */
#limits { padding-bottom: 0 !important; }
#limits-list { display: grid; gap: 10px; padding: 2px 0 8px; }
.limit-row { display: grid; grid-template-columns: 1fr 90px; align-items: center; gap: 12px; border-bottom: 1px dashed var(--line); padding: 8px 0; }
.limit-row:last-child { border-bottom: 0; }
.limit-row .name { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.limit-row .meta { text-align: right; font-variant-numeric: tabular-nums; }
.limit-row.total .name, .limit-row.total .meta { font-weight: 800; }
.limit-row.over .name, .limit-row.over .meta { color: var(--bad); }

/* ===== Expenses table ===== */
table { width: 100%; border-collapse: collapse; }
th, td { border-bottom: 1px solid var(--line); text-align: left; padding: 10px 6px; font-size: 14px; }
th { color: #8a94a6; font-weight: 700; }

/* ===== Pure CSS savings jar (CLEAN & MODERN) ===== */
.pw-jar {
  --fill: 0%; /* Рівень заповнення рідиною */
  position: relative;
  width: min(300px, 65vw); /* Трохи менша ширина */
  aspect-ratio: 1 / 1.2; /* Більш витончена форма */
  margin-inline: auto;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  background: none; /* Забираємо фоновий градієнт з контейнера */
  border-radius: 25px; /* Більш округлий контейнер */
  overflow: hidden;
  /* Додамо легку тінь до всього контейнера, щоб банка виділялася на будь-якому фоні */
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(0, 0, 0, 0.03);
}

/* зелена рідина */
.pw-jar .pw-liquid {
  position: absolute;
  left: 18%;
  right: 18%;
  bottom: 6%; /* Зміщено трохи вище */
  height: var(--fill);
  background: linear-gradient(180deg, #6dd5ed 0%, #2193b0 100%); /* Блакитний градієнт для "води" */
  transition: height .55s ease;
  border-bottom-left-radius: 50% 40%;
  border-bottom-right-radius: 50% 40%;
  z-index: 1;
}

/* хвиля зверху води */
.pw-jar .pw-liquid::before {
  content: "";
  position: absolute;
  top: -10px; /* Трохи менший відступ */
  left: -5%;
  width: 110%;
  height: 20px; /* Тонша хвиля */
  background: rgba(109, 213, 237, .8); /* Колір хвилі, що відповідає рідині */
  border-radius: 50%;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,.05)); /* М'якша тінь */
}

/* скло — сама форма банки */
.pw-jar .pw-jar-glass {
  position: absolute;
  inset: 15% 10% 3%; /* Коригуємо розміри */
  border: none; /* Прибираємо контур */
  border-radius: 50% 50% 55% 55% / 25% 25% 45% 45%; /* Плавніша форма */
  background: rgba(255, 255, 255, 0.7); /* Напівпрозорий білий колір для скла */
  box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.8), /* Внутрішній блиск */
              inset 0 0 15px rgba(0, 0, 0, 0.05), /* Внутрішня легка тінь */
              0 5px 15px rgba(0, 0, 0, 0.05); /* Легка зовнішня тінь */
  z-index: 3;
  pointer-events: none;
}

/* блискучі рефлекси на склі */
.pw-jar .pw-jar-glass::before,
.pw-jar .pw-jar-glass::after {
  content: "";
  position: absolute;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 50%;
  opacity: 0.7;
}
.pw-jar .pw-jar-glass::before {
  top: 10%;
  left: 15%;
  width: 25%;
  height: 40%;
  transform: rotate(20deg);
  filter: blur(5px);
}
.pw-jar .pw-jar-glass::after {
  top: 30%;
  right: 10%;
  width: 15%;
  height: 25%;
  transform: rotate(-10deg);
  filter: blur(3px);
}

/* шийка */
.pw-jar .pw-jar-neck {
  position: absolute;
  top: 8%; /* Трохи вище */
  width: 45%; /* Вужча шийка */
  height: 8%; /* Менша висота */
  border: none; /* Прибираємо контур */
  border-radius: 40% 40% 0 0 / 100% 100% 0 0;
  background: #e0e0e0; /* Світліший фон */
  box-shadow: inset 0 2px 5px rgba(0,0,0,.05); /* Легка тінь */
  z-index: 4;
}

/* кришка */
.pw-jar .pw-jar-cap {
  position: absolute;
  top: 0%;
  width: 55%; /* Вужча кришка */
  height: 8%; /* Менша висота */
  background: linear-gradient(to bottom, #cccccc, #b0b0b0); /* М'який градієнт */
  border: none; /* Прибираємо контур */
  border-radius: 999px;
  z-index: 5;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.6), 0 3px 8px rgba(0,0,0,.1); /* М'якший блиск та тінь */
}

/* риски на кришці - Змінено для більш мінімалістичного вигляду */
.pw-jar .pw-jar-cap::before {
  content: "";
  position: absolute;
  inset: 2px 10px; /* Трохи менший відступ */
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.4); /* Світліші, тонші риски */
  opacity: .8;
  box-shadow: inset 0 0 5px rgba(0,0,0,.05); /* Легка тінь всередині */
}

/* Зображення банки поверх */
.jar-img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  z-index: 2;
  pointer-events: none;
  user-select: none;
  display: block;
}

/* Кнопки під банкою */
.jar-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
}
.jar-controls button { min-width: 110px; }

/* Статистика */
.jar-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-top: 10px;
  text-align: center;
  font-variant-numeric: tabular-nums;
}
@media (max-width: 560px) {
  .jar-stats { grid-template-columns: 1fr; text-align: left; }
}

/* ===============================
   WISHLIST & REPORTS (unchanged)
   =============================== */
.wish-grid { grid-template-columns: repeat(4, minmax(0,1fr)); gap: 12px; }
@media(max-width:980px){ .wish-grid{ grid-template-columns: repeat(3, 1fr); } }
@media(max-width:720px){ .wish-grid{ grid-template-columns: repeat(2, 1fr); } }
@media(max-width:480px){ .wish-grid{ grid-template-columns: 1fr; } }

/* ===== Reports ===== */
.kpi-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  margin: 10px 0 20px;
}
.kpi-card {
  background: #fff;
  border: 1px solid #e6eefc;
  border-radius: 16px;
  padding: 12px 14px;
  box-shadow: 0 2px 12px rgba(30,64,175,.06);
}
.kpi-card .kpi-l { font-size: 12px; color: #6b7280; margin-bottom: 6px; }
.kpi-card .kpi-v { font-weight: 700; color: #1e293b; }
.kpi-card:nth-child(1) .kpi-v { color: #2563eb; }
.kpi-card:nth-child(2) .kpi-v { color: #059669; }
.kpi-card:nth-child(3) .kpi-v { color: #b91c1c; }

.rep-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px;
}
.rep-card {
  background: #fff;
  border: 1px solid #e6eefc;
  border-radius: 16px;
  padding: 14px;
  box-shadow: 0 2px 12px rgba(30,64,175,.06);
}
.rep-card h4 {
  margin: 6px 0 10px;
  font-size: 16px;
  font-weight: 700;
  color: #1e293b;
}
.bt-chart-box { height: 240px; }
.rep-card.tall .bt-chart-box { height: 280px; }
.card-note { margin-top: 8px; font-size: 12px; color: #6b7280; }
@media (max-width: 860px) {
  .rep-grid { grid-template-columns: 1fr; }
  .kpi-grid { grid-template-columns: 1fr; }
}
/* ===== Pure CSS savings jar ===== */
.pw-jar {
  --fill: 0%;
  position: relative;
  width: min(320px, 70vw);
  aspect-ratio: 3 / 4;
  margin-inline: auto;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  /* фон карти, як у тебе */
  background: radial-gradient(circle at 50% 15%, #ffffff 0%, #f4f8ff 65%, #e8f1ff 100%);
  border: 1px solid #dbeafe;
  border-radius: 20px;
  overflow: hidden;
}

/* зелена рідина */
.pw-jar .pw-liquid {
  position: absolute;
  left: 16%;
  right: 16%;
  bottom: 8%;
  height: var(--fill);
  background: linear-gradient(180deg, #9af4a1 0%, #44b967 100%);
  transition: height .55s ease;
  /* низ округлений */
  border-bottom-left-radius: 55% 45%;
  border-bottom-right-radius: 55% 45%;
  z-index: 1;
}

/* хвиля зверху води */
.pw-jar .pw-liquid::before {
  content: "";
  position: absolute;
  top: -14px;
  left: -6%;
  width: 112%;
  height: 30px;
  background: rgba(154, 244, 161, .96);
  border-radius: 50%;
  filter: drop-shadow(0 4px 6px rgba(0,0,0,.03));
}

/* скло — сама форма банки */
.pw-jar .pw-jar-glass {
  position: absolute;
  inset: 10% 10% 4%;
  border: 3px solid #000;
  border-bottom-left-radius: 55% 45%;
  border-bottom-right-radius: 55% 45%;
  border-top-left-radius: 35% 25%;
  border-top-right-radius: 35% 25%;
  background: radial-gradient(circle at 20% 20%, rgba(255,255,255,.35), rgba(255,255,255,0) 55%);
  z-index: 3;
  pointer-events: none;
}

/* шийка */
.pw-jar .pw-jar-neck {
  position: absolute;
  top: 4%;
  width: 48%;
  height: 10%;
  border: 3px solid #000;
  border-bottom: 0;
  border-radius: 999px;
  background: #fff;
  z-index: 4;
}

/* кришка */
.pw-jar .pw-jar-cap {
  position: absolute;
  top: 0;
  width: 58%;
  height: 8%;
  background: #3176c7;
  border: 3px solid #000;
  border-radius: 999px;
  z-index: 5;
  box-shadow: inset 0 3px 0 rgba(255,255,255,.3);
}

/* трохи рисок на кришці */
.pw-jar .pw-jar-cap::before {
  content: "";
  position: absolute;
  inset: 3px 12px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.35);
  opacity: .7;
}
/* ===== Modal (limits) ===== */
.modal {
  position: fixed;
  inset: 0;
  z-index: 2000;
  display: block;
}
.modal.hidden {
  display: none !important;
}
.modal__backdrop {
  position: absolute;
  inset: 0;
  background: rgba(15, 23, 42, 0.35);
  backdrop-filter: blur(3px);
}
.modal__dialog {
  position: relative;
  max-width: 520px;
  width: min(92vw, 520px);
  background: #fff;
  border-radius: 18px;
  margin: 60px auto;
  padding: 16px 16px 14px;
  box-shadow: 0 18px 45px rgba(15, 23, 42, .18);
  border: 1px solid rgba(148, 163, 184, 0.25);
}
.modal__head h3 {
  margin: 0;
}
.modal__body {
  max-height: 56vh;
  overflow-y: auto;
  margin-top: 10px;
}
.limits-form-list {
  display: grid;
  grid-template-columns: 1fr 90px;
  gap: 10px 14px;
  align-items: center;
}
.limits-form-list .cat {
  font-weight: 600;
  font-size: 14px;
}
.modal__foot {
  margin-top: 14px;
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}
@media (max-width: 540px) {
  .modal__dialog {
    margin: 30px auto;
    width: 94vw;
  }
  .limits-form-list {
    grid-template-columns: 1fr;
  }
}
